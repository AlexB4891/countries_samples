<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Regession analysis report</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="regression_transparency_files/libs/clipboard/clipboard.min.js"></script>
<script src="regression_transparency_files/libs/quarto-html/quarto.js"></script>
<script src="regression_transparency_files/libs/quarto-html/popper.min.js"></script>
<script src="regression_transparency_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="regression_transparency_files/libs/quarto-html/anchor.min.js"></script>
<link href="regression_transparency_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="regression_transparency_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="regression_transparency_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="regression_transparency_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="regression_transparency_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#joint-groups-t-maj-t-min-vs-c-maj-c-min" id="toc-joint-groups-t-maj-t-min-vs-c-maj-c-min" class="nav-link active" data-scroll-target="#joint-groups-t-maj-t-min-vs-c-maj-c-min"><span class="header-section-number">1</span> Joint groups (T-Maj + T-Min vs C-Maj + C-Min)</a>
  <ul class="collapse">
  <li><a href="#event-study-design-unsaturated-model" id="toc-event-study-design-unsaturated-model" class="nav-link" data-scroll-target="#event-study-design-unsaturated-model"><span class="header-section-number">1.1</span> Event Study design (unsaturated model)</a></li>
  <li><a href="#event-study-design-with-fixed-effects" id="toc-event-study-design-with-fixed-effects" class="nav-link" data-scroll-target="#event-study-design-with-fixed-effects"><span class="header-section-number">1.2</span> Event Study design (with fixed effects)</a></li>
  <li><a href="#event-study-design-assets-weighted-unsaturated-model" id="toc-event-study-design-assets-weighted-unsaturated-model" class="nav-link" data-scroll-target="#event-study-design-assets-weighted-unsaturated-model"><span class="header-section-number">1.3</span> Event Study design assets weighted (unsaturated model)</a></li>
  <li><a href="#event-study-design-assets-weighted-with-fixed-effects" id="toc-event-study-design-assets-weighted-with-fixed-effects" class="nav-link" data-scroll-target="#event-study-design-assets-weighted-with-fixed-effects"><span class="header-section-number">1.4</span> Event Study design assets weighted (with fixed effects)</a></li>
  <li><a href="#diff-in-diff-design-unsaturated-model" id="toc-diff-in-diff-design-unsaturated-model" class="nav-link" data-scroll-target="#diff-in-diff-design-unsaturated-model"><span class="header-section-number">1.5</span> Diff-in-diff design (unsaturated model)</a></li>
  <li><a href="#diff-in-diff-design-with-fixed-effects" id="toc-diff-in-diff-design-with-fixed-effects" class="nav-link" data-scroll-target="#diff-in-diff-design-with-fixed-effects"><span class="header-section-number">1.6</span> Diff-in-diff design (with fixed effects)</a></li>
  <li><a href="#diff-in-diff-design-assets-weighted-unsaturated-model" id="toc-diff-in-diff-design-assets-weighted-unsaturated-model" class="nav-link" data-scroll-target="#diff-in-diff-design-assets-weighted-unsaturated-model"><span class="header-section-number">1.7</span> Diff-in-diff design assets weighted (unsaturated model)</a></li>
  <li><a href="#diff-in-diff-design-assets-weighted-with-fixed-effects" id="toc-diff-in-diff-design-assets-weighted-with-fixed-effects" class="nav-link" data-scroll-target="#diff-in-diff-design-assets-weighted-with-fixed-effects"><span class="header-section-number">1.8</span> Diff-in-diff design assets weighted (with fixed effects)</a></li>
  </ul></li>
  <li><a href="#major-groups-t-maj-vs-c-maj" id="toc-major-groups-t-maj-vs-c-maj" class="nav-link" data-scroll-target="#major-groups-t-maj-vs-c-maj"><span class="header-section-number">2</span> Major groups (T-Maj vs C-Maj)</a>
  <ul class="collapse">
  <li><a href="#event-study-design-unsaturated-model-1" id="toc-event-study-design-unsaturated-model-1" class="nav-link" data-scroll-target="#event-study-design-unsaturated-model-1"><span class="header-section-number">2.1</span> Event Study design (unsaturated model)</a></li>
  <li><a href="#event-study-design-with-fixed-effects-1" id="toc-event-study-design-with-fixed-effects-1" class="nav-link" data-scroll-target="#event-study-design-with-fixed-effects-1"><span class="header-section-number">2.2</span> Event Study design (with fixed effects)</a></li>
  <li><a href="#event-study-design-assets-weighted-unsaturated-model-1" id="toc-event-study-design-assets-weighted-unsaturated-model-1" class="nav-link" data-scroll-target="#event-study-design-assets-weighted-unsaturated-model-1"><span class="header-section-number">2.3</span> Event Study design assets weighted (unsaturated model)</a></li>
  <li><a href="#event-study-design-assets-weighted-with-fixed-effects-1" id="toc-event-study-design-assets-weighted-with-fixed-effects-1" class="nav-link" data-scroll-target="#event-study-design-assets-weighted-with-fixed-effects-1"><span class="header-section-number">2.4</span> Event Study design assets weighted (with fixed effects)</a></li>
  <li><a href="#diff-in-diff-design-unsaturated-model-1" id="toc-diff-in-diff-design-unsaturated-model-1" class="nav-link" data-scroll-target="#diff-in-diff-design-unsaturated-model-1"><span class="header-section-number">2.5</span> Diff-in-diff design (unsaturated model)</a></li>
  <li><a href="#diff-in-diff-design-with-fixed-effects-1" id="toc-diff-in-diff-design-with-fixed-effects-1" class="nav-link" data-scroll-target="#diff-in-diff-design-with-fixed-effects-1"><span class="header-section-number">2.6</span> Diff-in-diff design (with fixed effects)</a></li>
  <li><a href="#diff-in-diff-design-assets-weighted-unsaturated-model-1" id="toc-diff-in-diff-design-assets-weighted-unsaturated-model-1" class="nav-link" data-scroll-target="#diff-in-diff-design-assets-weighted-unsaturated-model-1"><span class="header-section-number">2.7</span> Diff-in-diff design assets weighted (unsaturated model)</a></li>
  <li><a href="#diff-in-diff-design-assets-weighted-with-fixed-effects-1" id="toc-diff-in-diff-design-assets-weighted-with-fixed-effects-1" class="nav-link" data-scroll-target="#diff-in-diff-design-assets-weighted-with-fixed-effects-1"><span class="header-section-number">2.8</span> Diff-in-diff design assets weighted (with fixed effects)</a></li>
  </ul></li>
  <li><a href="#minor-groups-t-min-vs-c-min" id="toc-minor-groups-t-min-vs-c-min" class="nav-link" data-scroll-target="#minor-groups-t-min-vs-c-min"><span class="header-section-number">3</span> Minor groups (T-Min vs C-Min)</a>
  <ul class="collapse">
  <li><a href="#event-study-design-unsaturated-model-2" id="toc-event-study-design-unsaturated-model-2" class="nav-link" data-scroll-target="#event-study-design-unsaturated-model-2"><span class="header-section-number">3.1</span> Event Study design (unsaturated model)</a></li>
  <li><a href="#event-study-design-with-fixed-effects-2" id="toc-event-study-design-with-fixed-effects-2" class="nav-link" data-scroll-target="#event-study-design-with-fixed-effects-2"><span class="header-section-number">3.2</span> Event Study design (with fixed effects)</a></li>
  <li><a href="#event-study-design-assets-weighted-unsaturated-model-2" id="toc-event-study-design-assets-weighted-unsaturated-model-2" class="nav-link" data-scroll-target="#event-study-design-assets-weighted-unsaturated-model-2"><span class="header-section-number">3.3</span> Event Study design assets weighted (unsaturated model)</a></li>
  <li><a href="#event-study-design-assets-weighted-with-fixed-effects-2" id="toc-event-study-design-assets-weighted-with-fixed-effects-2" class="nav-link" data-scroll-target="#event-study-design-assets-weighted-with-fixed-effects-2"><span class="header-section-number">3.4</span> Event Study design assets weighted (with fixed effects)</a></li>
  <li><a href="#diff-in-diff-design-unsaturated-model-2" id="toc-diff-in-diff-design-unsaturated-model-2" class="nav-link" data-scroll-target="#diff-in-diff-design-unsaturated-model-2"><span class="header-section-number">3.5</span> Diff-in-diff design (unsaturated model)</a></li>
  <li><a href="#diff-in-diff-design-with-fixed-effects-2" id="toc-diff-in-diff-design-with-fixed-effects-2" class="nav-link" data-scroll-target="#diff-in-diff-design-with-fixed-effects-2"><span class="header-section-number">3.6</span> Diff-in-diff design (with fixed effects)</a></li>
  <li><a href="#diff-in-diff-design-assets-weighted-unsaturated-model-2" id="toc-diff-in-diff-design-assets-weighted-unsaturated-model-2" class="nav-link" data-scroll-target="#diff-in-diff-design-assets-weighted-unsaturated-model-2"><span class="header-section-number">3.7</span> Diff-in-diff design assets weighted (unsaturated model)</a></li>
  <li><a href="#diff-in-diff-design-assets-weighted-with-fixed-effects-2" id="toc-diff-in-diff-design-assets-weighted-with-fixed-effects-2" class="nav-link" data-scroll-target="#diff-in-diff-design-assets-weighted-with-fixed-effects-2"><span class="header-section-number">3.8</span> Diff-in-diff design assets weighted (with fixed effects)</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Regession analysis report</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Libraries:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fixest)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">"global.R"</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>populations <span class="ot">&lt;-</span> <span class="fu">str_split</span>(params<span class="sc">$</span>populations, <span class="at">pattern =</span> <span class="st">","</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="joint-groups-t-maj-t-min-vs-c-maj-c-min" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Joint groups (T-Maj + T-Min vs C-Maj + C-Min)</h1>
<section id="event-study-design-unsaturated-model" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="event-study-design-unsaturated-model"><span class="header-section-number">1.1</span> Event Study design (unsaturated model)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \sum_{k \neq 2014} \beta_k \times Time_{k} \times Treatment_{i} + \epsilon_{it}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(\{ k = 2012, \ldots, 2017 \}\)</span></li>
<li><span class="math inline">\(Y_{it}\)</span> is Log exits to tax haven (MID codes 1-7) ($), the dependent variable.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Time_{i}\)</span> are dummy variables that are 1 if the year is <span class="math inline">\(k\)</span>, and 0 otherwise. The year 2014 is the reference year and therefore does not appear in the equation.</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Log exits to tax haven (MID codes 1-7) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
=============================================================================================
                                           All firms    Treatment A  Treatment B  Treatment C
---------------------------------------------------------------------------------------------
(Intercept)                                   -12.93      -14.58       -14.58       -60.32   
                                              (37.68)     (70.49)      (70.44)      (54.40)  
anio_fiscal                                     0.01        0.01         0.01         0.04   
                                               (0.02)      (0.03)       (0.03)       (0.03)  
treatment                                       0.51 *     -0.11         0.19         0.51 * 
                                               (0.23)      (0.33)       (0.28)       (0.26)  
i(anio_fiscal, treatment, ref = 2014)2012      -0.20       -0.16        -0.20        -0.16   
                                               (0.25)      (0.34)       (0.26)       (0.26)  
i(anio_fiscal, treatment, ref = 2014)2013      -0.31       -0.22        -0.31        -0.29   
                                               (0.22)      (0.29)       (0.22)       (0.22)  
i(anio_fiscal, treatment, ref = 2014)2015       0.00        0.19         0.03         0.01   
                                               (0.19)      (0.24)       (0.20)       (0.20)  
i(anio_fiscal, treatment, ref = 2014)2016      -0.11        0.06        -0.13        -0.18   
                                               (0.22)      (0.29)       (0.24)       (0.23)  
i(anio_fiscal, treatment, ref = 2014)2017       0.01       -0.01        -0.01        -0.07   
                                               (0.24)      (0.31)       (0.26)       (0.25)  
i(anio_fiscal, treatment, ref = 2014)2018      -0.22        0.03        -0.24        -0.33   
                                               (0.28)      (0.36)       (0.30)       (0.29)  
i(anio_fiscal, treatment, ref = 2014)2019       0.13        0.38         0.26         0.15   
                                               (0.30)      (0.38)       (0.34)       (0.32)  
---------------------------------------------------------------------------------------------
r.squared                                       0.01        0.00         0.00         0.01   
adj.r.squared                                   0.00       -0.00        -0.00         0.01   
sigma                                           2.58        2.49         2.54         2.49   
statistic                                       3.04        0.52         0.73         2.69   
p.value                                         0.00        0.86         0.68         0.00   
df                                              9           9            9            9      
logLik                                     -11785.32    -3749.03     -4583.56     -6280.10   
AIC                                         23592.64     7520.07      9189.12     12582.19   
BIC                                         23664.28     7579.29      9250.45     12647.08   
deviance                                    33135.73     9952.43     12542.72     16700.41   
df.residual                                  4970        1599         1941         2684      
nobs                                         4980        1609         1951         2694      
=============================================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>fml_event_study <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'{dependent} ~  anio_fiscal + treatment + i(anio_fiscal,treatment, ref = 2014)'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">formula</span>(.)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>es_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> rtable,</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">formula =</span> fml_event_study)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> es_model,</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="event-study-design-with-fixed-effects" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="event-study-design-with-fixed-effects"><span class="header-section-number">1.2</span> Event Study design (with fixed effects)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \sum_{k \neq 2014} \beta_k \times Time_{k} \times Treatment_{i} + \alpha_i + \gamma_t + \epsilon_{it}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(\{ k = 2012, \ldots, 2017 \}\)</span></li>
<li><span class="math inline">\(Y_{it}\)</span> is Log exits to tax haven (MID codes 1-7) ($), the dependent variable.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Time_{i}\)</span> are dummy variables that are 1 if the year is <span class="math inline">\(k\)</span>, and 0 otherwise. The year 2014 is the reference year and therefore does not appear in the equation.</li>
<li><span class="math inline">\(alpha_i\)</span> are the fixed effects at firm level</li>
<li><span class="math inline">\(gamma_t\)</span> are the fixed effects at time</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Log exits to tax haven (MID codes 1-7) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
===========================================================================================
                                           All firms  Treatment A  Treatment B  Treatment C
-------------------------------------------------------------------------------------------
anio_fiscal2013                               0.07       0.14         0.14         0.10    
                                             (0.10)     (0.14)       (0.14)       (0.14)   
anio_fiscal2014                               0.25 *     0.23         0.23         0.07    
                                             (0.10)     (0.19)       (0.19)       (0.16)   
anio_fiscal2015                               0.01      -0.01        -0.01        -0.14    
                                             (0.11)     (0.19)       (0.19)       (0.16)   
anio_fiscal2016                              -0.09      -0.18        -0.18        -0.15    
                                             (0.12)     (0.20)       (0.20)       (0.17)   
anio_fiscal2017                              -0.00      -0.03        -0.03        -0.11    
                                             (0.12)     (0.20)       (0.20)       (0.17)   
anio_fiscal2018                               0.04       0.10         0.10         0.04    
                                             (0.13)     (0.22)       (0.22)       (0.18)   
anio_fiscal2019                               0.17       0.18         0.18         0.16    
                                             (0.13)     (0.21)       (0.21)       (0.18)   
i(anio_fiscal, treatment, ref = 2014)2012     0.13       0.14         0.02        -0.15    
                                             (0.22)     (0.31)       (0.27)       (0.25)   
i(anio_fiscal, treatment, ref = 2014)2013    -0.08      -0.19        -0.22        -0.34    
                                             (0.19)     (0.27)       (0.21)       (0.21)   
i(anio_fiscal, treatment, ref = 2014)2015    -0.07       0.05        -0.09        -0.12    
                                             (0.18)     (0.25)       (0.22)       (0.20)   
i(anio_fiscal, treatment, ref = 2014)2016    -0.02       0.23        -0.01        -0.20    
                                             (0.20)     (0.28)       (0.25)       (0.23)   
i(anio_fiscal, treatment, ref = 2014)2017     0.11       0.10         0.05        -0.04    
                                             (0.21)     (0.30)       (0.26)       (0.24)   
i(anio_fiscal, treatment, ref = 2014)2018     0.05       0.17        -0.08        -0.19    
                                             (0.25)     (0.34)       (0.30)       (0.28)   
i(anio_fiscal, treatment, ref = 2014)2019     0.12       0.21         0.12        -0.02    
                                             (0.29)     (0.38)       (0.33)       (0.32)   
-------------------------------------------------------------------------------------------
r.squared                                     0.01       0.01         0.01         0.01    
adj.r.squared                                -0.45      -0.43        -0.41        -0.43    
statistic                                     1.68       0.93         1.40         1.42    
p.value                                       0.05       0.52         0.15         0.13    
deviance                                   6803.82    1840.45      2270.46      3424.02    
df.residual                                3402       1114         1364         1866       
nobs                                       4980       1609         1951         2694       
===========================================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>fml_event_study <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'{dependent} ~  anio_fiscal + treatment + i(anio_fiscal,treatment, ref = 2014)'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">formula</span>(.)</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>es_model_fe <span class="ot">&lt;-</span> <span class="fu">plm</span>(<span class="at">data =</span> rtable,</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>                    <span class="at">formula =</span> fml_event_study,</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>                    <span class="at">index =</span> <span class="fu">c</span>(<span class="st">"firm_id"</span>,<span class="st">"anio_fiscal"</span>),</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>                    <span class="at">model =</span> <span class="st">"within"</span>)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> es_model_fe,</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="event-study-design-assets-weighted-unsaturated-model" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="event-study-design-assets-weighted-unsaturated-model"><span class="header-section-number">1.3</span> Event Study design assets weighted (unsaturated model)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \sum_{k \neq 2014} \beta_k \times Time_{k} \times Treatment_{i} + \epsilon_{it}\]</span></p>
<p><span class="math display">\[\text{Note: The model is weighted by: Total assets 2014.}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(\{ k = 2012, \ldots, 2017 \}\)</span></li>
<li><span class="math inline">\(Y_{it}\)</span> is Log exits to tax haven (MID codes 1-7) ($), the dependent variable.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Time_{i}\)</span> are dummy variables that are 1 if the year is <span class="math inline">\(k\)</span>, and 0 otherwise. The year 2014 is the reference year and therefore does not appear in the equation.</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Log exits to tax haven (MID codes 1-7) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-3" role="tab" aria-controls="tabset-3-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
===============================================================================
                             All firms    Treatment A  Treatment B  Treatment C
-------------------------------------------------------------------------------
(Intercept)                      -4.79      -12.49       -12.49       -55.07   
                                (37.93)     (70.35)      (70.33)      (53.83)  
anio_fiscal                       0.01        0.01         0.01         0.03   
                                 (0.02)      (0.03)       (0.03)       (0.03)  
treatment                         0.49 *     -0.14         0.18         0.52   
                                 (0.24)      (0.34)       (0.29)       (0.26)  
anio_fiscal::2012:treatment      -0.23       -0.17        -0.22        -0.18   
                                 (0.25)      (0.34)       (0.26)       (0.26)  
anio_fiscal::2013:treatment      -0.32       -0.22        -0.32        -0.30   
                                 (0.23)      (0.30)       (0.23)       (0.23)  
anio_fiscal::2015:treatment       0.00        0.17         0.03         0.01   
                                 (0.20)      (0.24)       (0.20)       (0.20)  
anio_fiscal::2016:treatment      -0.15        0.02        -0.18        -0.22   
                                 (0.23)      (0.29)       (0.24)       (0.23)  
anio_fiscal::2017:treatment       0.02        0.01        -0.01        -0.07   
                                 (0.24)      (0.31)       (0.26)       (0.25)  
anio_fiscal::2018:treatment      -0.25       -0.01        -0.29        -0.37   
                                 (0.28)      (0.36)       (0.31)       (0.30)  
anio_fiscal::2019:treatment       0.13        0.36         0.23         0.12   
                                 (0.31)      (0.38)       (0.34)       (0.32)  
-------------------------------------------------------------------------------
r.squared                         0.00        0.00         0.00         0.01   
adj.r.squared                     0.00       -0.00        -0.00         0.01   
sigma                            10.08        9.61         9.86         9.65   
logLik                       -11791.79    -3750.97     -4585.88     -6282.97   
AIC                           23603.58     7521.94      9191.77     12585.93   
BIC                           23668.71     7575.78      9247.53     12644.92   
nobs                           4980        1609         1951         2694      
===============================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-3-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>fml_event_study <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'{dependent} ~  anio_fiscal + treatment + i(anio_fiscal,treatment, ref = 2014)'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">formula</span>(.)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>es_model_aw <span class="ot">&lt;-</span> <span class="fu">feols</span>(<span class="at">data =</span> rtable,</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>                     <span class="at">fml =</span> fml_event_study,</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>                  <span class="at">weights =</span> <span class="sc">~</span>assets_2014,</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> <span class="sc">~</span>firm_id)</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> es_model_aw,</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="event-study-design-assets-weighted-with-fixed-effects" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="event-study-design-assets-weighted-with-fixed-effects"><span class="header-section-number">1.4</span> Event Study design assets weighted (with fixed effects)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \sum_{k \neq 2014} \beta_k \times Time_{k} \times Treatment_{i} + \alpha_i + \gamma_t + \epsilon_{it}\]</span></p>
<p><span class="math display">\[\text{Note: The model is weighted by: Total assets 2014.}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(\{ k = 2012, \ldots, 2017 \}\)</span></li>
<li><span class="math inline">\(Y_{it}\)</span> is Log exits to tax haven (MID codes 1-7) ($), the dependent variable.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Time_{i}\)</span> are dummy variables that are 1 if the year is <span class="math inline">\(k\)</span>, and 0 otherwise. The year 2014 is the reference year and therefore does not appear in the equation.</li>
<li><span class="math inline">\(alpha_i\)</span> are the fixed effects at firm level</li>
<li><span class="math inline">\(gamma_t\)</span> are the fixed effects at time</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Log exits to tax haven (MID codes 1-7) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-3" role="tab" aria-controls="tabset-4-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
=============================================================================
                             All firms  Treatment A  Treatment B  Treatment C
-----------------------------------------------------------------------------
anio_fiscal::2012:treatment      0.11       0.12        -0.01        -0.20   
                                (0.22)     (0.32)       (0.28)       (0.25)  
anio_fiscal::2013:treatment     -0.10      -0.22        -0.25        -0.39   
                                (0.20)     (0.27)       (0.22)       (0.21)  
anio_fiscal::2015:treatment     -0.07       0.05        -0.10        -0.13   
                                (0.18)     (0.26)       (0.22)       (0.21)  
anio_fiscal::2016:treatment     -0.05       0.24        -0.02        -0.25   
                                (0.21)     (0.29)       (0.26)       (0.24)  
anio_fiscal::2017:treatment      0.12       0.13         0.05        -0.05   
                                (0.22)     (0.30)       (0.26)       (0.25)  
anio_fiscal::2018:treatment      0.04       0.16        -0.10        -0.23   
                                (0.26)     (0.35)       (0.31)       (0.29)  
anio_fiscal::2019:treatment      0.12       0.21         0.10        -0.06   
                                (0.29)     (0.38)       (0.34)       (0.32)  
-----------------------------------------------------------------------------
r.squared                        0.79       0.81         0.82         0.79   
adj.r.squared                    0.69       0.73         0.74         0.70   
sigma                            5.59       4.99         5.03         5.30   
logLik                       -7843.41   -2391.25     -2916.35     -4145.71   
AIC                          18842.81    5772.50      7006.70      9947.43   
BIC                          29120.62    8437.27     10279.87     14831.62   
nobs                          4980       1609         1951         2694      
within.r.squared                 0.00       0.00         0.00         0.00   
=============================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-4-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  fml_event_study_fe <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'{dependent} ~  i(anio_fiscal,treatment, ref = 2014) | firm_id + anio_fiscal'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">formula</span>(.)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>es_model_aw_fe <span class="ot">&lt;-</span> <span class="fu">feols</span>(<span class="at">data =</span> rtable,</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>                        <span class="at">fml =</span> fml_event_study_fe,</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>                        <span class="at">weights =</span> <span class="sc">~</span>assets_2014,</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>                        <span class="at">cluster =</span> <span class="sc">~</span>firm_id)</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> es_model_aw_fe,</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="diff-in-diff-design-unsaturated-model" class="level2" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="diff-in-diff-design-unsaturated-model"><span class="header-section-number">1.5</span> Diff-in-diff design (unsaturated model)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 \times Treatment_{i} + \beta_1 \times Post_{t} + \beta_2 \times Treatment_{i} \times Post_{t} + \epsilon_{it}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(Y_{it}\)</span> is Log exits to tax haven (MID codes 1-7) ($), the dependent variable for unit <span class="math inline">\(i\)</span> at time <span class="math inline">\(t\)</span>.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Post_{t}\)</span> is a dummy variable that is 1 if time <span class="math inline">\(t\)</span> is after the implementation of the treatment, and 0 otherwise.</li>
<li><span class="math inline">\(Treatment_{i} \times Post_{t}\)</span> is the interaction between the treatment and the post period, which captures the treatment effect in the difference-in-differences.</li>
</ul>
<p><strong>Dependent variable:</strong> Log exits to tax haven (MID codes 1-7) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-3" role="tab" aria-controls="tabset-5-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
===========================================================================
                    All firms      Treatment A   Treatment B   Treatment C 
---------------------------------------------------------------------------
(Intercept)             11.09 ***     11.41 ***     11.41 ***     11.09 ***
                        (0.10)        (0.19)        (0.19)        (0.14)   
treatment                0.29         -0.31         -0.05          0.27    
                        (0.21)        (0.30)        (0.27)        (0.24)   
postPost                -0.04         -0.08         -0.08         -0.02    
                        (0.08)        (0.16)        (0.16)        (0.12)   
treatment:postPost       0.21          0.37          0.27          0.22    
                        (0.19)        (0.27)        (0.24)        (0.21)   
---------------------------------------------------------------------------
r.squared                0.00          0.00          0.00          0.01    
adj.r.squared            0.00         -0.00         -0.00          0.01    
sigma                    2.58          2.49          2.54          2.49    
statistic                8.21          0.95          0.91          6.18    
p.value                  0.00          0.41          0.44          0.00    
df                       3             3             3             3       
logLik              -11786.70      -3749.93      -4585.48      -6282.94    
AIC                  23583.41       7509.87       9180.96      12575.88    
BIC                  23615.97       7536.79       9208.84      12605.37    
deviance             33154.18       9963.56      12567.49      16735.69    
df.residual           4976          1605          1947          2690       
nobs                  4980          1609          1951          2694       
===========================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-5-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>fml <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'dependent_variable ~ treatment + post + treatment:post'</span>)<span class="sc">%&gt;%</span> </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formula</span>(.)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>did_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> rtable,</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>                  <span class="at">formula =</span> fml)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> did_model,</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="diff-in-diff-design-with-fixed-effects" class="level2" data-number="1.6">
<h2 data-number="1.6" class="anchored" data-anchor-id="diff-in-diff-design-with-fixed-effects"><span class="header-section-number">1.6</span> Diff-in-diff design (with fixed effects)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \beta_3 \times Treatment_{i} \times Post_{t} + \alpha_i + \gamma_t + \epsilon_{it}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(Y_{it}\)</span> is Log exits to tax haven (MID codes 1-7) ($), the dependent variable for unit <span class="math inline">\(i\)</span> at time <span class="math inline">\(t\)</span>.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Post_{t}\)</span> is a dummy variable that is 1 if time <span class="math inline">\(t\)</span> is after the implementation of the treatment, and 0 otherwise.</li>
<li><span class="math inline">\(Treatment_{i} \times Post_{t}\)</span> is the interaction between the treatment and the post period, which captures the treatment effect in the difference-in-differences.</li>
<li><span class="math inline">\(\alpha_i\)</span> is the fixed effect for unit <span class="math inline">\(i\)</span>, which captures time-invariant characteristics of each unit.</li>
<li><span class="math inline">\(\gamma_t\)</span> is the fixed effect for time <span class="math inline">\(t\)</span>, which captures any time shock that affects all units in the same way.</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Log exits to tax haven (MID codes 1-7) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-3" role="tab" aria-controls="tabset-6-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-6-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-6-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
====================================================================
                    All firms  Treatment A  Treatment B  Treatment C
--------------------------------------------------------------------
postPost              -0.10      -0.14        -0.14        -0.12    
                      (0.07)     (0.12)       (0.12)       (0.10)   
treatment:postPost     0.01       0.17         0.05         0.03    
                      (0.16)     (0.23)       (0.19)       (0.18)   
--------------------------------------------------------------------
r.squared              0.00       0.00         0.00         0.00    
adj.r.squared         -0.46      -0.43        -0.41        -0.43    
statistic              1.81       0.84         1.18         1.28    
p.value                0.16       0.43         0.31         0.28    
deviance            6843.71    1859.26      2299.03      3455.89    
df.residual         3414       1126         1376         1878       
nobs                4980       1609         1951         2694       
====================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-6-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>fml <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'dependent_variable ~ treatment + post + treatment:post'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formula</span>(.)</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>did_model_fe <span class="ot">&lt;-</span> <span class="fu">plm</span>(<span class="at">data =</span> rtable,</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>                    <span class="at">formula =</span> fml,</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>                    <span class="at">index =</span> <span class="fu">c</span>(<span class="st">"firm_id"</span>,<span class="st">"anio_fiscal"</span>),</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>                    <span class="at">model =</span> <span class="st">"within"</span>)</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> did_model_fe,</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="diff-in-diff-design-assets-weighted-unsaturated-model" class="level2" data-number="1.7">
<h2 data-number="1.7" class="anchored" data-anchor-id="diff-in-diff-design-assets-weighted-unsaturated-model"><span class="header-section-number">1.7</span> Diff-in-diff design assets weighted (unsaturated model)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 \times Treatment_{i} + \beta_1 \times Post_{t} + \beta_2 \times Treatment_{i} \times Post_{t} + \epsilon_{it}\]</span> <span class="math display">\[\text{Note: The model is weighted by: Total assets 2014.}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(Y_{it}\)</span> is Log exits to tax haven (MID codes 1-7) ($), the dependent variable for unit <span class="math inline">\(i\)</span> at time <span class="math inline">\(t\)</span>.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Post_{t}\)</span> is a dummy variable that is 1 if time <span class="math inline">\(t\)</span> is after the implementation of the treatment, and 0 otherwise.</li>
<li><span class="math inline">\(Treatment_{i} \times Post_{t}\)</span> is the interaction between the treatment and the post period, which captures the treatment effect in the difference-in-differences.</li>
</ul>
<p><strong>Dependent variable:</strong> Log exits to tax haven (MID codes 1-7) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-7-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-1" role="tab" aria-controls="tabset-7-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-2" role="tab" aria-controls="tabset-7-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-3" role="tab" aria-controls="tabset-7-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-7-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-7-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-7-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
==============================================================================
                    All firms      Treatment A    Treatment B    Treatment C  
------------------------------------------------------------------------------
(Intercept)             11.24 ***      11.55 ***      11.55 ***      11.21 ***
                        (0.10)         (0.20)         (0.20)         (0.15)   
treatment                0.26          -0.35          -0.08           0.26    
                        (0.21)         (0.31)         (0.28)         (0.25)   
postPost                -0.05          -0.09          -0.09          -0.04    
                        (0.08)         (0.16)         (0.16)         (0.12)   
treatment:postPost       0.22           0.37           0.26           0.21    
                        (0.19)         (0.26)         (0.24)         (0.21)   
------------------------------------------------------------------------------
r.squared                0.00           0.00           0.00           0.01    
adj.r.squared            0.00           0.00          -0.00           0.01    
sigma                   10.08           9.60           9.85           9.65    
statistic                7.20           1.07           0.66           5.79    
p.value                  0.00           0.36           0.57           0.00    
df                       3              3              3              3       
logLik              -11855.89       -3769.03       -4617.08       -6321.28    
AIC                  23721.79        7548.06        9244.15       12652.55    
BIC                  23754.35        7574.98        9272.03       12682.04    
deviance            505538.42      147906.47      189075.22      250284.58    
df.residual           4976           1605           1947           2690       
nobs                  4980           1609           1951           2694       
==============================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-7-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>fml <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'dependent_variable ~ treatment + post + treatment:post'</span>)<span class="sc">%&gt;%</span> </span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formula</span>(.)</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>did_model_aw <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> rtable,</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>                   <span class="at">formula =</span> fml,</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>                   <span class="at">weights =</span> assets_2014)</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> did_model,</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="diff-in-diff-design-assets-weighted-with-fixed-effects" class="level2" data-number="1.8">
<h2 data-number="1.8" class="anchored" data-anchor-id="diff-in-diff-design-assets-weighted-with-fixed-effects"><span class="header-section-number">1.8</span> Diff-in-diff design assets weighted (with fixed effects)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \beta_3 \times Treatment_{i} \times Post_{t} + \alpha_i + \gamma_t + \epsilon_{it}\]</span></p>
<p><span class="math display">\[\text{Note: The model is weighted by: Total assets 2014.}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(Y_{it}\)</span> is Log exits to tax haven (MID codes 1-7) ($), the dependent variable for unit <span class="math inline">\(i\)</span> at time <span class="math inline">\(t\)</span>.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Post_{t}\)</span> is a dummy variable that is 1 if time <span class="math inline">\(t\)</span> is after the implementation of the treatment, and 0 otherwise.</li>
<li><span class="math inline">\(Treatment_{i} \times Post_{t}\)</span> is the interaction between the treatment and the post period, which captures the treatment effect in the difference-in-differences.</li>
<li><span class="math inline">\(\alpha_i\)</span> is the fixed effect for unit <span class="math inline">\(i\)</span>, which captures time-invariant characteristics of each unit.</li>
<li><span class="math inline">\(\gamma_t\)</span> is the fixed effect for time <span class="math inline">\(t\)</span>, which captures any time shock that affects all units in the same way.</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Log exits to tax haven (MID codes 1-7) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-8-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-1" role="tab" aria-controls="tabset-8-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-2" role="tab" aria-controls="tabset-8-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-3" role="tab" aria-controls="tabset-8-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-8-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-8-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-8-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
====================================================================
                    All firms  Treatment A  Treatment B  Treatment C
--------------------------------------------------------------------
treatment:postPost      0.02       0.19         0.06         0.03   
                       (0.17)     (0.23)       (0.20)       (0.19)  
--------------------------------------------------------------------
r.squared               0.79       0.81         0.82         0.79   
adj.r.squared           0.69       0.73         0.74         0.70   
sigma                   5.59       4.98         5.03         5.30   
logLik              -7844.94   -2392.57     -2917.71     -4147.83   
AIC                 18833.88    5763.13      6997.43      9939.66   
BIC                 29072.61    8395.60     10237.14     14788.46   
nobs                 4980       1609         1951         2694      
within.r.squared        0.00       0.00         0.00         0.00   
====================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-8-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>fml <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'dependent_variable ~ treatment + post + treatment:post'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formula</span>(.)</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>did_model_fe_aw <span class="ot">&lt;-</span> <span class="fu">feols</span>(<span class="at">data =</span> rtable,</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>                         <span class="at">fml =</span> fml_fe,</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>                         <span class="at">weights =</span> <span class="sc">~</span>assets_2014,</span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>                         <span class="at">cluster =</span> <span class="sc">~</span>firm_id)</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> did_model_fe,</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="major-groups-t-maj-vs-c-maj" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Major groups (T-Maj vs C-Maj)</h1>
<section id="event-study-design-unsaturated-model-1" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="event-study-design-unsaturated-model-1"><span class="header-section-number">2.1</span> Event Study design (unsaturated model)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \sum_{k \neq 2014} \beta_k \times Time_{k} \times Treatment_{i} + \epsilon_{it}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(\{ k = 2012, \ldots, 2017 \}\)</span></li>
<li><span class="math inline">\(Y_{it}\)</span> is Log exits to tax haven (MID codes 1-7) ($), the dependent variable.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Time_{i}\)</span> are dummy variables that are 1 if the year is <span class="math inline">\(k\)</span>, and 0 otherwise. The year 2014 is the reference year and therefore does not appear in the equation.</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Log exits to tax haven (MID codes 1-7) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-9-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-1" role="tab" aria-controls="tabset-9-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-2" role="tab" aria-controls="tabset-9-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-3" role="tab" aria-controls="tabset-9-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-9-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-9-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-9-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
===========================================================================================
                                           All firms  Treatment A  Treatment B  Treatment C
-------------------------------------------------------------------------------------------
(Intercept)                                   -9.53     -68.33       -68.33       -41.41   
                                             (44.41)    (75.20)      (75.13)      (60.81)  
anio_fiscal                                    0.01       0.04         0.04         0.03   
                                              (0.02)     (0.04)       (0.04)       (0.03)  
treatment                                      0.42      -0.20         0.13         0.41   
                                              (0.28)     (0.38)       (0.32)       (0.30)  
i(anio_fiscal, treatment, ref = 2014)2012     -0.10       0.13        -0.05        -0.08   
                                              (0.30)     (0.42)       (0.31)       (0.31)  
i(anio_fiscal, treatment, ref = 2014)2013     -0.29      -0.17        -0.31        -0.32   
                                              (0.27)     (0.35)       (0.27)       (0.27)  
i(anio_fiscal, treatment, ref = 2014)2015      0.01       0.24        -0.02        -0.00   
                                              (0.22)     (0.28)       (0.22)       (0.22)  
i(anio_fiscal, treatment, ref = 2014)2016     -0.10       0.07        -0.16        -0.13   
                                              (0.27)     (0.34)       (0.28)       (0.27)  
i(anio_fiscal, treatment, ref = 2014)2017     -0.01      -0.16        -0.13        -0.09   
                                              (0.29)     (0.36)       (0.30)       (0.29)  
i(anio_fiscal, treatment, ref = 2014)2018     -0.14      -0.02        -0.30        -0.24   
                                              (0.33)     (0.42)       (0.36)       (0.34)  
i(anio_fiscal, treatment, ref = 2014)2019      0.34       0.24         0.19         0.25   
                                              (0.37)     (0.46)       (0.40)       (0.39)  
-------------------------------------------------------------------------------------------
r.squared                                      0.00       0.00         0.00         0.01   
adj.r.squared                                  0.00      -0.00        -0.00         0.00   
sigma                                          2.64       2.50         2.56         2.52   
statistic                                      1.82       0.53         0.53         1.47   
p.value                                        0.06       0.85         0.85         0.16   
df                                             9          9            9            9      
logLik                                     -8806.12   -2914.32     -3559.41     -4857.56   
AIC                                        17634.24    5850.65      7140.83      9737.11   
BIC                                        17702.58    5907.09      7199.35      9799.12   
deviance                                   25604.28    7753.83      9837.77     13142.38   
df.residual                                 3678       1240         1501         2064      
nobs                                        3688       1250         1511         2074      
===========================================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-9-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>fml_event_study <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'{dependent} ~  anio_fiscal + treatment + i(anio_fiscal,treatment, ref = 2014)'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">formula</span>(.)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>es_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> rtable,</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">formula =</span> fml_event_study)</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> es_model,</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="event-study-design-with-fixed-effects-1" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="event-study-design-with-fixed-effects-1"><span class="header-section-number">2.2</span> Event Study design (with fixed effects)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \sum_{k \neq 2014} \beta_k \times Time_{k} \times Treatment_{i} + \alpha_i + \gamma_t + \epsilon_{it}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(\{ k = 2012, \ldots, 2017 \}\)</span></li>
<li><span class="math inline">\(Y_{it}\)</span> is Log exits to tax haven (MID codes 1-7) ($), the dependent variable.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Time_{i}\)</span> are dummy variables that are 1 if the year is <span class="math inline">\(k\)</span>, and 0 otherwise. The year 2014 is the reference year and therefore does not appear in the equation.</li>
<li><span class="math inline">\(alpha_i\)</span> are the fixed effects at firm level</li>
<li><span class="math inline">\(gamma_t\)</span> are the fixed effects at time</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Log exits to tax haven (MID codes 1-7) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-10-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-1" role="tab" aria-controls="tabset-10-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-2" role="tab" aria-controls="tabset-10-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-3" role="tab" aria-controls="tabset-10-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-10-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-10-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-10-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-10-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
===========================================================================================
                                           All firms  Treatment A  Treatment B  Treatment C
-------------------------------------------------------------------------------------------
anio_fiscal2013                               0.21       0.12         0.12         0.12    
                                             (0.11)     (0.16)       (0.16)       (0.16)   
anio_fiscal2014                               0.29 *     0.18         0.18         0.03    
                                             (0.12)     (0.20)       (0.20)       (0.17)   
anio_fiscal2015                              -0.02      -0.05        -0.05        -0.25    
                                             (0.12)     (0.20)       (0.20)       (0.17)   
anio_fiscal2016                              -0.05      -0.25        -0.25        -0.23    
                                             (0.14)     (0.21)       (0.21)       (0.20)   
anio_fiscal2017                               0.08      -0.05        -0.05        -0.16    
                                             (0.14)     (0.21)       (0.21)       (0.19)   
anio_fiscal2018                               0.15       0.10         0.10         0.01    
                                             (0.14)     (0.23)       (0.23)       (0.20)   
anio_fiscal2019                               0.28       0.25         0.25         0.17    
                                             (0.15)     (0.22)       (0.22)       (0.20)   
i(anio_fiscal, treatment, ref = 2014)2012     0.19       0.14         0.06        -0.09    
                                             (0.27)     (0.40)       (0.32)       (0.30)   
i(anio_fiscal, treatment, ref = 2014)2013    -0.08      -0.01        -0.16        -0.31    
                                             (0.21)     (0.28)       (0.23)       (0.22)   
i(anio_fiscal, treatment, ref = 2014)2015    -0.06       0.08        -0.16        -0.11    
                                             (0.21)     (0.29)       (0.25)       (0.23)   
i(anio_fiscal, treatment, ref = 2014)2016    -0.03       0.38         0.05        -0.12    
                                             (0.25)     (0.33)       (0.29)       (0.27)   
i(anio_fiscal, treatment, ref = 2014)2017     0.01       0.10        -0.02        -0.07    
                                             (0.26)     (0.35)       (0.30)       (0.29)   
i(anio_fiscal, treatment, ref = 2014)2018    -0.01       0.20        -0.12        -0.19    
                                             (0.30)     (0.38)       (0.34)       (0.32)   
i(anio_fiscal, treatment, ref = 2014)2019     0.04       0.00        -0.07        -0.14    
                                             (0.36)     (0.46)       (0.40)       (0.39)   
-------------------------------------------------------------------------------------------
r.squared                                     0.01       0.01         0.01         0.01    
adj.r.squared                                -0.46      -0.43        -0.42        -0.43    
statistic                                     1.76       0.72         1.12         1.33    
p.value                                       0.04       0.76         0.34         0.18    
deviance                                   5039.44    1353.16      1697.35      2645.32    
df.residual                                2509        862         1051         1433       
nobs                                       3688       1250         1511         2074       
===========================================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-10-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-10-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>fml_event_study <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'{dependent} ~  anio_fiscal + treatment + i(anio_fiscal,treatment, ref = 2014)'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">formula</span>(.)</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>es_model_fe <span class="ot">&lt;-</span> <span class="fu">plm</span>(<span class="at">data =</span> rtable,</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>                    <span class="at">formula =</span> fml_event_study,</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>                    <span class="at">index =</span> <span class="fu">c</span>(<span class="st">"firm_id"</span>,<span class="st">"anio_fiscal"</span>),</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>                    <span class="at">model =</span> <span class="st">"within"</span>)</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> es_model_fe,</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="event-study-design-assets-weighted-unsaturated-model-1" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="event-study-design-assets-weighted-unsaturated-model-1"><span class="header-section-number">2.3</span> Event Study design assets weighted (unsaturated model)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \sum_{k \neq 2014} \beta_k \times Time_{k} \times Treatment_{i} + \epsilon_{it}\]</span></p>
<p><span class="math display">\[\text{Note: The model is weighted by: Total assets 2014.}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(\{ k = 2012, \ldots, 2017 \}\)</span></li>
<li><span class="math inline">\(Y_{it}\)</span> is Log exits to tax haven (MID codes 1-7) ($), the dependent variable.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Time_{i}\)</span> are dummy variables that are 1 if the year is <span class="math inline">\(k\)</span>, and 0 otherwise. The year 2014 is the reference year and therefore does not appear in the equation.</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Log exits to tax haven (MID codes 1-7) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-11-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-1" role="tab" aria-controls="tabset-11-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-11-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-2" role="tab" aria-controls="tabset-11-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-11-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-11-3" role="tab" aria-controls="tabset-11-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-11-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-11-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-11-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-11-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
=============================================================================
                             All firms  Treatment A  Treatment B  Treatment C
-----------------------------------------------------------------------------
(Intercept)                      1.51     -59.74       -59.74       -31.28   
                               (44.92)    (74.50)      (74.48)      (60.31)  
anio_fiscal                      0.00       0.04         0.04         0.02   
                                (0.02)     (0.04)       (0.04)       (0.03)  
treatment                        0.41      -0.22         0.12         0.42   
                                (0.29)     (0.39)       (0.34)       (0.31)  
anio_fiscal::2012:treatment     -0.13       0.10        -0.08        -0.11   
                                (0.31)     (0.43)       (0.32)       (0.31)  
anio_fiscal::2013:treatment     -0.30      -0.19        -0.33        -0.34   
                                (0.27)     (0.36)       (0.27)       (0.27)  
anio_fiscal::2015:treatment      0.01       0.21        -0.02        -0.01   
                                (0.22)     (0.28)       (0.23)       (0.23)  
anio_fiscal::2016:treatment     -0.14       0.04        -0.20        -0.17   
                                (0.27)     (0.35)       (0.28)       (0.28)  
anio_fiscal::2017:treatment      0.01      -0.14        -0.12        -0.08   
                                (0.29)     (0.36)       (0.31)       (0.30)  
anio_fiscal::2018:treatment     -0.15      -0.04        -0.32        -0.26   
                                (0.35)     (0.43)       (0.37)       (0.36)  
anio_fiscal::2019:treatment      0.33       0.23         0.18         0.25   
                                (0.38)     (0.46)       (0.41)       (0.40)  
-----------------------------------------------------------------------------
r.squared                        0.00       0.00         0.00         0.01   
adj.r.squared                    0.00      -0.00        -0.00         0.00   
sigma                           10.29       9.60         9.89         9.73   
logLik                       -8811.09   -2915.96     -3561.38     -4860.05   
AIC                          17642.19    5851.92      7142.76      9740.10   
BIC                          17704.32    5903.23      7195.96      9796.47   
nobs                          3688       1250         1511         2074      
=============================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-11-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-11-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>fml_event_study <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'{dependent} ~  anio_fiscal + treatment + i(anio_fiscal,treatment, ref = 2014)'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">formula</span>(.)</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>es_model_aw <span class="ot">&lt;-</span> <span class="fu">feols</span>(<span class="at">data =</span> rtable,</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>                     <span class="at">fml =</span> fml_event_study,</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>                  <span class="at">weights =</span> <span class="sc">~</span>assets_2014,</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> <span class="sc">~</span>firm_id)</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> es_model_aw,</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="event-study-design-assets-weighted-with-fixed-effects-1" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="event-study-design-assets-weighted-with-fixed-effects-1"><span class="header-section-number">2.4</span> Event Study design assets weighted (with fixed effects)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \sum_{k \neq 2014} \beta_k \times Time_{k} \times Treatment_{i} + \alpha_i + \gamma_t + \epsilon_{it}\]</span></p>
<p><span class="math display">\[\text{Note: The model is weighted by: Total assets 2014.}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(\{ k = 2012, \ldots, 2017 \}\)</span></li>
<li><span class="math inline">\(Y_{it}\)</span> is Log exits to tax haven (MID codes 1-7) ($), the dependent variable.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Time_{i}\)</span> are dummy variables that are 1 if the year is <span class="math inline">\(k\)</span>, and 0 otherwise. The year 2014 is the reference year and therefore does not appear in the equation.</li>
<li><span class="math inline">\(alpha_i\)</span> are the fixed effects at firm level</li>
<li><span class="math inline">\(gamma_t\)</span> are the fixed effects at time</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Log exits to tax haven (MID codes 1-7) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-12-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-1" role="tab" aria-controls="tabset-12-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-12-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-2" role="tab" aria-controls="tabset-12-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-12-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-12-3" role="tab" aria-controls="tabset-12-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-12-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-12-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-12-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-12-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
=============================================================================
                             All firms  Treatment A  Treatment B  Treatment C
-----------------------------------------------------------------------------
anio_fiscal::2012:treatment      0.17       0.14         0.04        -0.12   
                                (0.27)     (0.41)       (0.32)       (0.31)  
anio_fiscal::2013:treatment     -0.11      -0.05        -0.21        -0.38   
                                (0.22)     (0.29)       (0.23)       (0.23)  
anio_fiscal::2015:treatment     -0.07       0.08        -0.17        -0.12   
                                (0.22)     (0.30)       (0.25)       (0.24)  
anio_fiscal::2016:treatment     -0.06       0.41         0.05        -0.16   
                                (0.26)     (0.34)       (0.30)       (0.29)  
anio_fiscal::2017:treatment      0.02       0.15        -0.01        -0.07   
                                (0.27)     (0.36)       (0.31)       (0.30)  
anio_fiscal::2018:treatment     -0.01       0.22        -0.13        -0.20   
                                (0.31)     (0.38)       (0.35)       (0.33)  
anio_fiscal::2019:treatment      0.04       0.02        -0.09        -0.18   
                                (0.38)     (0.46)       (0.41)       (0.40)  
-----------------------------------------------------------------------------
r.squared                        0.80       0.82         0.83         0.80   
adj.r.squared                    0.70       0.74         0.75         0.70   
sigma                            5.60       4.85         4.94         5.30   
logLik                       -5808.87   -1823.30     -2231.95     -3195.30   
AIC                          13975.73    4422.61      5383.90      7672.60   
BIC                          21300.67    6413.40      7831.34     11286.07   
nobs                          3688       1250         1511         2074      
within.r.squared                 0.00       0.00         0.00         0.00   
=============================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-12-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-12-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  fml_event_study_fe <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'{dependent} ~  i(anio_fiscal,treatment, ref = 2014) | firm_id + anio_fiscal'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">formula</span>(.)</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>es_model_aw_fe <span class="ot">&lt;-</span> <span class="fu">feols</span>(<span class="at">data =</span> rtable,</span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>                        <span class="at">fml =</span> fml_event_study_fe,</span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>                        <span class="at">weights =</span> <span class="sc">~</span>assets_2014,</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>                        <span class="at">cluster =</span> <span class="sc">~</span>firm_id)</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> es_model_aw_fe,</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="diff-in-diff-design-unsaturated-model-1" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="diff-in-diff-design-unsaturated-model-1"><span class="header-section-number">2.5</span> Diff-in-diff design (unsaturated model)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 \times Treatment_{i} + \beta_1 \times Post_{t} + \beta_2 \times Treatment_{i} \times Post_{t} + \epsilon_{it}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(Y_{it}\)</span> is Log exits to tax haven (MID codes 1-7) ($), the dependent variable for unit <span class="math inline">\(i\)</span> at time <span class="math inline">\(t\)</span>.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Post_{t}\)</span> is a dummy variable that is 1 if time <span class="math inline">\(t\)</span> is after the implementation of the treatment, and 0 otherwise.</li>
<li><span class="math inline">\(Treatment_{i} \times Post_{t}\)</span> is the interaction between the treatment and the post period, which captures the treatment effect in the difference-in-differences.</li>
</ul>
<p><strong>Dependent variable:</strong> Log exits to tax haven (MID codes 1-7) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-13-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-13-1" role="tab" aria-controls="tabset-13-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-13-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-13-2" role="tab" aria-controls="tabset-13-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-13-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-13-3" role="tab" aria-controls="tabset-13-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-13-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-13-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-41-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-13-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-13-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
==========================================================================
                    All firms     Treatment A   Treatment B   Treatment C 
--------------------------------------------------------------------------
(Intercept)            11.23 ***     11.50 ***     11.50 ***     11.28 ***
                       (0.11)        (0.21)        (0.21)        (0.16)   
treatment               0.22         -0.30         -0.07          0.15    
                       (0.26)        (0.35)        (0.31)        (0.28)   
postPost               -0.09          0.01          0.01         -0.12    
                       (0.10)        (0.17)        (0.17)        (0.13)   
treatment:postPost      0.26          0.23          0.16          0.29    
                       (0.23)        (0.31)        (0.27)        (0.25)   
--------------------------------------------------------------------------
r.squared               0.00          0.00          0.00          0.00    
adj.r.squared           0.00         -0.00         -0.00          0.00    
sigma                   2.64          2.50          2.56          2.52    
statistic               4.83          0.75          0.30          3.36    
p.value                 0.00          0.52          0.82          0.02    
df                      3             3             3             3       
logLik              -8807.08      -2915.61      -3561.37      -4859.12    
AIC                 17624.15       5841.21       7132.75       9728.23    
BIC                 17655.22       5866.87       7159.35       9756.42    
deviance            25617.58       7769.74       9863.34      13162.16    
df.residual          3684          1246          1507          2070       
nobs                 3688          1250          1511          2074       
==========================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-13-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-13-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>fml <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'dependent_variable ~ treatment + post + treatment:post'</span>)<span class="sc">%&gt;%</span> </span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formula</span>(.)</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>did_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> rtable,</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>                  <span class="at">formula =</span> fml)</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> did_model,</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="diff-in-diff-design-with-fixed-effects-1" class="level2" data-number="2.6">
<h2 data-number="2.6" class="anchored" data-anchor-id="diff-in-diff-design-with-fixed-effects-1"><span class="header-section-number">2.6</span> Diff-in-diff design (with fixed effects)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \beta_3 \times Treatment_{i} \times Post_{t} + \alpha_i + \gamma_t + \epsilon_{it}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(Y_{it}\)</span> is Log exits to tax haven (MID codes 1-7) ($), the dependent variable for unit <span class="math inline">\(i\)</span> at time <span class="math inline">\(t\)</span>.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Post_{t}\)</span> is a dummy variable that is 1 if time <span class="math inline">\(t\)</span> is after the implementation of the treatment, and 0 otherwise.</li>
<li><span class="math inline">\(Treatment_{i} \times Post_{t}\)</span> is the interaction between the treatment and the post period, which captures the treatment effect in the difference-in-differences.</li>
<li><span class="math inline">\(\alpha_i\)</span> is the fixed effect for unit <span class="math inline">\(i\)</span>, which captures time-invariant characteristics of each unit.</li>
<li><span class="math inline">\(\gamma_t\)</span> is the fixed effect for time <span class="math inline">\(t\)</span>, which captures any time shock that affects all units in the same way.</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Log exits to tax haven (MID codes 1-7) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-14-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-14-1" role="tab" aria-controls="tabset-14-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-14-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-14-2" role="tab" aria-controls="tabset-14-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-14-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-14-3" role="tab" aria-controls="tabset-14-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-14-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-14-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-44-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-14-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-14-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
====================================================================
                    All firms  Treatment A  Treatment B  Treatment C
--------------------------------------------------------------------
postPost              -0.11      -0.12        -0.12        -0.17    
                      (0.08)     (0.14)       (0.14)       (0.11)   
treatment:postPost    -0.06       0.10        -0.05        -0.01    
                      (0.20)     (0.27)       (0.22)       (0.21)   
--------------------------------------------------------------------
r.squared              0.00       0.00         0.00         0.00    
adj.r.squared         -0.46      -0.43        -0.42        -0.43    
statistic              2.35       0.61         1.72         2.51    
p.value                0.10       0.55         0.18         0.08    
deviance            5079.50    1367.01      1717.09      2670.32    
df.residual         2521        874         1063         1445       
nobs                3688       1250         1511         2074       
====================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-14-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-14-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>fml <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'dependent_variable ~ treatment + post + treatment:post'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formula</span>(.)</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>did_model_fe <span class="ot">&lt;-</span> <span class="fu">plm</span>(<span class="at">data =</span> rtable,</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>                    <span class="at">formula =</span> fml,</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>                    <span class="at">index =</span> <span class="fu">c</span>(<span class="st">"firm_id"</span>,<span class="st">"anio_fiscal"</span>),</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>                    <span class="at">model =</span> <span class="st">"within"</span>)</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> did_model_fe,</span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="diff-in-diff-design-assets-weighted-unsaturated-model-1" class="level2" data-number="2.7">
<h2 data-number="2.7" class="anchored" data-anchor-id="diff-in-diff-design-assets-weighted-unsaturated-model-1"><span class="header-section-number">2.7</span> Diff-in-diff design assets weighted (unsaturated model)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 \times Treatment_{i} + \beta_1 \times Post_{t} + \beta_2 \times Treatment_{i} \times Post_{t} + \epsilon_{it}\]</span> <span class="math display">\[\text{Note: The model is weighted by: Total assets 2014.}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(Y_{it}\)</span> is Log exits to tax haven (MID codes 1-7) ($), the dependent variable for unit <span class="math inline">\(i\)</span> at time <span class="math inline">\(t\)</span>.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Post_{t}\)</span> is a dummy variable that is 1 if time <span class="math inline">\(t\)</span> is after the implementation of the treatment, and 0 otherwise.</li>
<li><span class="math inline">\(Treatment_{i} \times Post_{t}\)</span> is the interaction between the treatment and the post period, which captures the treatment effect in the difference-in-differences.</li>
</ul>
<p><strong>Dependent variable:</strong> Log exits to tax haven (MID codes 1-7) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-15-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-15-1" role="tab" aria-controls="tabset-15-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-15-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-15-2" role="tab" aria-controls="tabset-15-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-15-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-15-3" role="tab" aria-controls="tabset-15-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-15-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-15-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-47-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-15-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-15-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
==============================================================================
                    All firms      Treatment A    Treatment B    Treatment C  
------------------------------------------------------------------------------
(Intercept)             11.38 ***      11.66 ***      11.66 ***      11.42 ***
                        (0.12)         (0.22)         (0.22)         (0.16)   
treatment                0.19          -0.35          -0.10           0.14    
                        (0.27)         (0.36)         (0.32)         (0.29)   
postPost                -0.11          -0.01          -0.01          -0.14    
                        (0.10)         (0.17)         (0.17)         (0.13)   
treatment:postPost       0.26           0.24           0.17           0.30    
                        (0.23)         (0.31)         (0.27)         (0.25)   
------------------------------------------------------------------------------
r.squared                0.00           0.00           0.00           0.00    
adj.r.squared            0.00          -0.00          -0.00           0.00    
sigma                   10.28           9.58           9.89           9.72    
statistic                4.35           0.91           0.23           3.24    
p.value                  0.00           0.43           0.87           0.02    
df                       3              3              3              3       
logLik               -8864.52       -2928.41       -3585.11       -4889.07    
AIC                  17739.05        5866.83        7180.22        9788.15    
BIC                  17770.11        5892.48        7206.82        9816.33    
deviance            389514.71      114417.45      147278.33      195749.56    
df.residual           3684           1246           1507           2070       
nobs                  3688           1250           1511           2074       
==============================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-15-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-15-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>fml <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'dependent_variable ~ treatment + post + treatment:post'</span>)<span class="sc">%&gt;%</span> </span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formula</span>(.)</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>did_model_aw <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> rtable,</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>                   <span class="at">formula =</span> fml,</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>                   <span class="at">weights =</span> assets_2014)</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> did_model,</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="diff-in-diff-design-assets-weighted-with-fixed-effects-1" class="level2" data-number="2.8">
<h2 data-number="2.8" class="anchored" data-anchor-id="diff-in-diff-design-assets-weighted-with-fixed-effects-1"><span class="header-section-number">2.8</span> Diff-in-diff design assets weighted (with fixed effects)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \beta_3 \times Treatment_{i} \times Post_{t} + \alpha_i + \gamma_t + \epsilon_{it}\]</span></p>
<p><span class="math display">\[\text{Note: The model is weighted by: Total assets 2014.}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(Y_{it}\)</span> is Log exits to tax haven (MID codes 1-7) ($), the dependent variable for unit <span class="math inline">\(i\)</span> at time <span class="math inline">\(t\)</span>.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Post_{t}\)</span> is a dummy variable that is 1 if time <span class="math inline">\(t\)</span> is after the implementation of the treatment, and 0 otherwise.</li>
<li><span class="math inline">\(Treatment_{i} \times Post_{t}\)</span> is the interaction between the treatment and the post period, which captures the treatment effect in the difference-in-differences.</li>
<li><span class="math inline">\(\alpha_i\)</span> is the fixed effect for unit <span class="math inline">\(i\)</span>, which captures time-invariant characteristics of each unit.</li>
<li><span class="math inline">\(\gamma_t\)</span> is the fixed effect for time <span class="math inline">\(t\)</span>, which captures any time shock that affects all units in the same way.</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Log exits to tax haven (MID codes 1-7) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-16-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-16-1" role="tab" aria-controls="tabset-16-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-16-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-16-2" role="tab" aria-controls="tabset-16-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-16-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-16-3" role="tab" aria-controls="tabset-16-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-16-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-16-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-50-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-16-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-16-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
====================================================================
                    All firms  Treatment A  Treatment B  Treatment C
--------------------------------------------------------------------
treatment:postPost     -0.04       0.15        -0.02         0.01   
                       (0.20)     (0.28)       (0.24)       (0.22)  
--------------------------------------------------------------------
r.squared               0.80       0.82         0.83         0.79   
adj.r.squared           0.71       0.74         0.75         0.70   
sigma                   5.59       4.84         4.93         5.30   
logLik              -5809.70   -1824.65     -2232.89     -3196.39   
AIC                 13965.39    4413.30      5373.79      7662.77   
BIC                 21253.05    6373.30      7789.31     11242.42   
nobs                 3688       1250         1511         2074      
within.r.squared        0.00       0.00         0.00         0.00   
====================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-16-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-16-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>fml <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'dependent_variable ~ treatment + post + treatment:post'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formula</span>(.)</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>did_model_fe_aw <span class="ot">&lt;-</span> <span class="fu">feols</span>(<span class="at">data =</span> rtable,</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>                         <span class="at">fml =</span> fml_fe,</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>                         <span class="at">weights =</span> <span class="sc">~</span>assets_2014,</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>                         <span class="at">cluster =</span> <span class="sc">~</span>firm_id)</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> did_model_fe,</span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="minor-groups-t-min-vs-c-min" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Minor groups (T-Min vs C-Min)</h1>
<section id="event-study-design-unsaturated-model-2" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="event-study-design-unsaturated-model-2"><span class="header-section-number">3.1</span> Event Study design (unsaturated model)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \sum_{k \neq 2014} \beta_k \times Time_{k} \times Treatment_{i} + \epsilon_{it}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(\{ k = 2012, \ldots, 2017 \}\)</span></li>
<li><span class="math inline">\(Y_{it}\)</span> is Log exits to tax haven (MID codes 1-7) ($), the dependent variable.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Time_{i}\)</span> are dummy variables that are 1 if the year is <span class="math inline">\(k\)</span>, and 0 otherwise. The year 2014 is the reference year and therefore does not appear in the equation.</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Log exits to tax haven (MID codes 1-7) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-17-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-17-1" role="tab" aria-controls="tabset-17-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-17-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-17-2" role="tab" aria-controls="tabset-17-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-17-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-17-3" role="tab" aria-controls="tabset-17-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-17-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-17-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-54-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-17-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-17-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
===========================================================================================
                                           All firms  Treatment A  Treatment B  Treatment C
-------------------------------------------------------------------------------------------
(Intercept)                                  -10.45    190.81        190.81      -134.89   
                                             (70.32)  (187.04)      (186.46)     (118.24)  
anio_fiscal                                    0.01     -0.09         -0.09         0.07   
                                              (0.03)    (0.09)        (0.09)       (0.06)  
treatment                                      0.77      0.41          0.63         0.96   
                                              (0.43)    (0.68)        (0.60)       (0.51)  
i(anio_fiscal, treatment, ref = 2014)2012     -0.39     -0.77         -0.60        -0.28   
                                              (0.43)    (0.56)        (0.49)       (0.46)  
i(anio_fiscal, treatment, ref = 2014)2013     -0.34     -0.36         -0.33        -0.17   
                                              (0.41)    (0.57)        (0.44)       (0.44)  
i(anio_fiscal, treatment, ref = 2014)2015     -0.03      0.04          0.17         0.01   
                                              (0.41)    (0.51)        (0.45)       (0.45)  
i(anio_fiscal, treatment, ref = 2014)2016     -0.11      0.08         -0.00        -0.33   
                                              (0.40)    (0.53)        (0.46)       (0.43)  
i(anio_fiscal, treatment, ref = 2014)2017      0.06      0.48          0.42        -0.06   
                                              (0.42)    (0.60)        (0.52)       (0.47)  
i(anio_fiscal, treatment, ref = 2014)2018     -0.37      0.33          0.06        -0.58   
                                              (0.49)    (0.70)        (0.62)       (0.55)  
i(anio_fiscal, treatment, ref = 2014)2019     -0.23      0.91          0.66        -0.14   
                                              (0.53)    (0.77)        (0.68)       (0.57)  
-------------------------------------------------------------------------------------------
r.squared                                      0.01      0.02          0.03         0.03   
adj.r.squared                                  0.01     -0.00          0.00         0.02   
sigma                                          2.40      2.44          2.45         2.37   
statistic                                      1.97      0.87          1.24         2.27   
p.value                                        0.04      0.56          0.27         0.02   
df                                             9         9             9            9      
logLik                                     -2958.94   -824.03      -1013.39     -1409.16   
AIC                                         5939.88   1670.07       2048.77      2840.32   
BIC                                         5996.69   1712.78       2093.72      2889.05   
deviance                                    7379.59   2071.77       2579.10      3420.45   
df.residual                                 1282       349           430          610      
nobs                                        1292       359           440          620      
===========================================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-17-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-17-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>fml_event_study <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'{dependent} ~  anio_fiscal + treatment + i(anio_fiscal,treatment, ref = 2014)'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">formula</span>(.)</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>es_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> rtable,</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">formula =</span> fml_event_study)</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> es_model,</span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="event-study-design-with-fixed-effects-2" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="event-study-design-with-fixed-effects-2"><span class="header-section-number">3.2</span> Event Study design (with fixed effects)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \sum_{k \neq 2014} \beta_k \times Time_{k} \times Treatment_{i} + \alpha_i + \gamma_t + \epsilon_{it}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(\{ k = 2012, \ldots, 2017 \}\)</span></li>
<li><span class="math inline">\(Y_{it}\)</span> is Log exits to tax haven (MID codes 1-7) ($), the dependent variable.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Time_{i}\)</span> are dummy variables that are 1 if the year is <span class="math inline">\(k\)</span>, and 0 otherwise. The year 2014 is the reference year and therefore does not appear in the equation.</li>
<li><span class="math inline">\(alpha_i\)</span> are the fixed effects at firm level</li>
<li><span class="math inline">\(gamma_t\)</span> are the fixed effects at time</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Log exits to tax haven (MID codes 1-7) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-18-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-18-1" role="tab" aria-controls="tabset-18-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-18-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-18-2" role="tab" aria-controls="tabset-18-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-18-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-18-3" role="tab" aria-controls="tabset-18-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-18-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-18-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-57-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-18-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-18-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
===========================================================================================
                                           All firms  Treatment A  Treatment B  Treatment C
-------------------------------------------------------------------------------------------
anio_fiscal2013                              -0.30      0.24         0.24         0.03     
                                             (0.20)    (0.41)       (0.41)       (0.29)    
anio_fiscal2014                               0.12      0.58         0.58         0.25     
                                             (0.22)    (0.65)       (0.64)       (0.35)    
anio_fiscal2015                               0.15      0.26         0.26         0.30     
                                             (0.22)    (0.64)       (0.64)       (0.38)    
anio_fiscal2016                              -0.20      0.13         0.13         0.16     
                                             (0.22)    (0.59)       (0.59)       (0.37)    
anio_fiscal2017                              -0.22      0.10         0.10         0.09     
                                             (0.24)    (0.62)       (0.62)       (0.37)    
anio_fiscal2018                              -0.27      0.10         0.10         0.21     
                                             (0.25)    (0.73)       (0.73)       (0.42)    
anio_fiscal2019                              -0.12     -0.08        -0.08         0.17     
                                             (0.25)    (0.65)       (0.65)       (0.38)    
i(anio_fiscal, treatment, ref = 2014)2012     0.02      0.35         0.17        -0.16     
                                             (0.38)    (0.72)       (0.71)       (0.47)    
i(anio_fiscal, treatment, ref = 2014)2013    -0.01     -0.47        -0.18        -0.30     
                                             (0.40)    (0.66)       (0.53)       (0.44)    
i(anio_fiscal, treatment, ref = 2014)2015    -0.11      0.04         0.20        -0.17     
                                             (0.32)    (0.51)       (0.44)       (0.41)    
i(anio_fiscal, treatment, ref = 2014)2016     0.01     -0.11        -0.10        -0.46     
                                             (0.34)    (0.53)       (0.46)       (0.43)    
i(anio_fiscal, treatment, ref = 2014)2017     0.37      0.18         0.33         0.01     
                                             (0.34)    (0.56)       (0.48)       (0.40)    
i(anio_fiscal, treatment, ref = 2014)2018     0.25      0.29         0.24        -0.19     
                                             (0.44)    (0.76)       (0.64)       (0.57)    
i(anio_fiscal, treatment, ref = 2014)2019     0.35      0.94         0.88         0.31     
                                             (0.45)    (0.70)       (0.61)       (0.53)    
-------------------------------------------------------------------------------------------
r.squared                                     0.02      0.04         0.03         0.02     
adj.r.squared                                -0.44     -0.44        -0.42        -0.44     
statistic                                     1.03      0.71         0.72         0.68     
p.value                                       0.42      0.76         0.75         0.79     
deviance                                   1733.44    473.25       561.31       763.63     
df.residual                                 879       238          299          419        
nobs                                       1292       359          440          620        
===========================================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-18-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-18-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>fml_event_study <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'{dependent} ~  anio_fiscal + treatment + i(anio_fiscal,treatment, ref = 2014)'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">formula</span>(.)</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>es_model_fe <span class="ot">&lt;-</span> <span class="fu">plm</span>(<span class="at">data =</span> rtable,</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>                    <span class="at">formula =</span> fml_event_study,</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>                    <span class="at">index =</span> <span class="fu">c</span>(<span class="st">"firm_id"</span>,<span class="st">"anio_fiscal"</span>),</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a>                    <span class="at">model =</span> <span class="st">"within"</span>)</span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> es_model_fe,</span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="event-study-design-assets-weighted-unsaturated-model-2" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="event-study-design-assets-weighted-unsaturated-model-2"><span class="header-section-number">3.3</span> Event Study design assets weighted (unsaturated model)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \sum_{k \neq 2014} \beta_k \times Time_{k} \times Treatment_{i} + \epsilon_{it}\]</span></p>
<p><span class="math display">\[\text{Note: The model is weighted by: Total assets 2014.}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(\{ k = 2012, \ldots, 2017 \}\)</span></li>
<li><span class="math inline">\(Y_{it}\)</span> is Log exits to tax haven (MID codes 1-7) ($), the dependent variable.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Time_{i}\)</span> are dummy variables that are 1 if the year is <span class="math inline">\(k\)</span>, and 0 otherwise. The year 2014 is the reference year and therefore does not appear in the equation.</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Log exits to tax haven (MID codes 1-7) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-19-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-19-1" role="tab" aria-controls="tabset-19-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-19-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-19-2" role="tab" aria-controls="tabset-19-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-19-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-19-3" role="tab" aria-controls="tabset-19-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-19-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-19-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-60-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-19-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-19-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
=============================================================================
                             All firms  Treatment A  Treatment B  Treatment C
-----------------------------------------------------------------------------
(Intercept)                    -10.75    159.00        159.00      -151.59   
                               (69.69)  (189.64)      (189.50)     (113.69)  
anio_fiscal                      0.01     -0.07         -0.07         0.08   
                                (0.03)    (0.09)        (0.09)       (0.06)  
treatment                        0.75      0.42          0.67         1.01   
                                (0.43)    (0.71)        (0.64)       (0.52)  
anio_fiscal::2012:treatment     -0.41     -0.72         -0.57        -0.26   
                                (0.43)    (0.54)        (0.47)       (0.45)  
anio_fiscal::2013:treatment     -0.34     -0.29         -0.31        -0.15   
                                (0.41)    (0.56)        (0.45)       (0.44)  
anio_fiscal::2015:treatment     -0.01      0.04          0.17         0.01   
                                (0.40)    (0.49)        (0.44)       (0.43)  
anio_fiscal::2016:treatment     -0.15      0.04         -0.08        -0.39   
                                (0.39)    (0.51)        (0.45)       (0.42)  
anio_fiscal::2017:treatment      0.07      0.46          0.37        -0.09   
                                (0.42)    (0.59)        (0.52)       (0.47)  
anio_fiscal::2018:treatment     -0.43      0.21         -0.09        -0.71   
                                (0.49)    (0.69)        (0.62)       (0.54)  
anio_fiscal::2019:treatment     -0.23      0.84          0.54        -0.23   
                                (0.52)    (0.76)        (0.68)       (0.57)  
-----------------------------------------------------------------------------
r.squared                        0.01      0.02          0.02         0.03   
adj.r.squared                    0.01     -0.01          0.00         0.02   
sigma                            9.41      9.52          9.63         9.23   
logLik                       -2960.63   -824.31      -1013.76     -1409.63   
AIC                           5941.26   1668.63       2047.51      2839.26   
BIC                           5992.90   1707.46       2088.38      2883.56   
nobs                          1292       359           440          620      
=============================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-19-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-19-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>fml_event_study <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'{dependent} ~  anio_fiscal + treatment + i(anio_fiscal,treatment, ref = 2014)'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">formula</span>(.)</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>es_model_aw <span class="ot">&lt;-</span> <span class="fu">feols</span>(<span class="at">data =</span> rtable,</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>                     <span class="at">fml =</span> fml_event_study,</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>                  <span class="at">weights =</span> <span class="sc">~</span>assets_2014,</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> <span class="sc">~</span>firm_id)</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> es_model_aw,</span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-16"><a href="#cb39-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb39-17"><a href="#cb39-17" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb39-18"><a href="#cb39-18" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="event-study-design-assets-weighted-with-fixed-effects-2" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="event-study-design-assets-weighted-with-fixed-effects-2"><span class="header-section-number">3.4</span> Event Study design assets weighted (with fixed effects)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \sum_{k \neq 2014} \beta_k \times Time_{k} \times Treatment_{i} + \alpha_i + \gamma_t + \epsilon_{it}\]</span></p>
<p><span class="math display">\[\text{Note: The model is weighted by: Total assets 2014.}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(\{ k = 2012, \ldots, 2017 \}\)</span></li>
<li><span class="math inline">\(Y_{it}\)</span> is Log exits to tax haven (MID codes 1-7) ($), the dependent variable.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Time_{i}\)</span> are dummy variables that are 1 if the year is <span class="math inline">\(k\)</span>, and 0 otherwise. The year 2014 is the reference year and therefore does not appear in the equation.</li>
<li><span class="math inline">\(alpha_i\)</span> are the fixed effects at firm level</li>
<li><span class="math inline">\(gamma_t\)</span> are the fixed effects at time</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Log exits to tax haven (MID codes 1-7) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-20-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-20-1" role="tab" aria-controls="tabset-20-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-20-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-20-2" role="tab" aria-controls="tabset-20-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-20-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-20-3" role="tab" aria-controls="tabset-20-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-20-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-20-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-63-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-20-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-20-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
=============================================================================
                             All firms  Treatment A  Treatment B  Treatment C
-----------------------------------------------------------------------------
anio_fiscal::2012:treatment     -0.02      0.31         0.14        -0.27    
                                (0.39)    (0.73)       (0.72)       (0.48)   
anio_fiscal::2013:treatment      0.02     -0.41        -0.13        -0.28    
                                (0.40)    (0.66)       (0.55)       (0.45)   
anio_fiscal::2015:treatment     -0.10      0.02         0.18        -0.23    
                                (0.32)    (0.49)       (0.44)       (0.42)   
anio_fiscal::2016:treatment     -0.02     -0.19        -0.18        -0.55    
                                (0.35)    (0.52)       (0.46)       (0.43)   
anio_fiscal::2017:treatment      0.36      0.15         0.29        -0.02    
                                (0.35)    (0.55)       (0.47)       (0.41)   
anio_fiscal::2018:treatment      0.22      0.14         0.10        -0.34    
                                (0.45)    (0.76)       (0.65)       (0.57)   
anio_fiscal::2019:treatment      0.34      0.86         0.79         0.23    
                                (0.45)    (0.69)       (0.61)       (0.54)   
-----------------------------------------------------------------------------
r.squared                        0.76      0.77         0.79         0.78    
adj.r.squared                    0.65      0.66         0.69         0.68    
sigma                            5.58      5.53         5.39         5.31    
logLik                       -2023.29   -559.12      -678.03      -944.56    
AIC                           4872.58   1360.23      1638.07      2291.11    
BIC                           7005.29   1830.11      2214.30      3181.49    
nobs                          1292       359          440          620       
within.r.squared                 0.00      0.02         0.01         0.01    
=============================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-20-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-20-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  fml_event_study_fe <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'{dependent} ~  i(anio_fiscal,treatment, ref = 2014) | firm_id + anio_fiscal'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">formula</span>(.)</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>es_model_aw_fe <span class="ot">&lt;-</span> <span class="fu">feols</span>(<span class="at">data =</span> rtable,</span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>                        <span class="at">fml =</span> fml_event_study_fe,</span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>                        <span class="at">weights =</span> <span class="sc">~</span>assets_2014,</span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>                        <span class="at">cluster =</span> <span class="sc">~</span>firm_id)</span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> es_model_aw_fe,</span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="diff-in-diff-design-unsaturated-model-2" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="diff-in-diff-design-unsaturated-model-2"><span class="header-section-number">3.5</span> Diff-in-diff design (unsaturated model)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 \times Treatment_{i} + \beta_1 \times Post_{t} + \beta_2 \times Treatment_{i} \times Post_{t} + \epsilon_{it}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(Y_{it}\)</span> is Log exits to tax haven (MID codes 1-7) ($), the dependent variable for unit <span class="math inline">\(i\)</span> at time <span class="math inline">\(t\)</span>.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Post_{t}\)</span> is a dummy variable that is 1 if time <span class="math inline">\(t\)</span> is after the implementation of the treatment, and 0 otherwise.</li>
<li><span class="math inline">\(Treatment_{i} \times Post_{t}\)</span> is the interaction between the treatment and the post period, which captures the treatment effect in the difference-in-differences.</li>
</ul>
<p><strong>Dependent variable:</strong> Log exits to tax haven (MID codes 1-7) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-21-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-21-1" role="tab" aria-controls="tabset-21-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-21-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-21-2" role="tab" aria-controls="tabset-21-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-21-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-21-3" role="tab" aria-controls="tabset-21-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-21-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-21-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-66-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-21-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-21-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
=========================================================================
                    All firms     Treatment A  Treatment B   Treatment C 
-------------------------------------------------------------------------
(Intercept)            10.69 ***    10.86 ***     10.86 ***     10.32 ***
                       (0.17)       (0.46)        (0.46)        (0.31)   
treatment               0.54         0.02          0.31          0.84    
                       (0.36)       (0.63)        (0.58)        (0.46)   
postPost                0.08        -0.37         -0.37          0.33    
                       (0.16)       (0.40)        (0.40)        (0.28)   
treatment:postPost      0.09         0.77          0.60         -0.11    
                       (0.35)       (0.56)        (0.52)        (0.43)   
-------------------------------------------------------------------------
r.squared               0.01         0.02          0.02          0.03    
adj.r.squared           0.01         0.01          0.01          0.02    
sigma                   2.39         2.42          2.44          2.36    
statistic               5.49         2.00          3.13          6.26    
p.value                 0.00         0.11          0.03          0.00    
df                      3            3             3             3       
logLik              -2959.62      -824.99      -1014.32      -1410.07    
AIC                  5929.24      1659.98       2038.63       2830.13    
BIC                  5955.06      1679.39       2059.07       2852.28    
deviance             7387.35      2082.82       2590.04       3430.43    
df.residual          1288          355           436           616       
nobs                 1292          359           440           620       
=========================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-21-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-21-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>fml <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'dependent_variable ~ treatment + post + treatment:post'</span>)<span class="sc">%&gt;%</span> </span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formula</span>(.)</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>did_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> rtable,</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>                  <span class="at">formula =</span> fml)</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> did_model,</span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb43-17"><a href="#cb43-17" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="diff-in-diff-design-with-fixed-effects-2" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="diff-in-diff-design-with-fixed-effects-2"><span class="header-section-number">3.6</span> Diff-in-diff design (with fixed effects)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \beta_3 \times Treatment_{i} \times Post_{t} + \alpha_i + \gamma_t + \epsilon_{it}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(Y_{it}\)</span> is Log exits to tax haven (MID codes 1-7) ($), the dependent variable for unit <span class="math inline">\(i\)</span> at time <span class="math inline">\(t\)</span>.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Post_{t}\)</span> is a dummy variable that is 1 if time <span class="math inline">\(t\)</span> is after the implementation of the treatment, and 0 otherwise.</li>
<li><span class="math inline">\(Treatment_{i} \times Post_{t}\)</span> is the interaction between the treatment and the post period, which captures the treatment effect in the difference-in-differences.</li>
<li><span class="math inline">\(\alpha_i\)</span> is the fixed effect for unit <span class="math inline">\(i\)</span>, which captures time-invariant characteristics of each unit.</li>
<li><span class="math inline">\(\gamma_t\)</span> is the fixed effect for time <span class="math inline">\(t\)</span>, which captures any time shock that affects all units in the same way.</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Log exits to tax haven (MID codes 1-7) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-22-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-22-1" role="tab" aria-controls="tabset-22-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-22-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-22-2" role="tab" aria-controls="tabset-22-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-22-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-22-3" role="tab" aria-controls="tabset-22-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-22-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-22-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-69-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-22-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-22-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
====================================================================
                    All firms  Treatment A  Treatment B  Treatment C
--------------------------------------------------------------------
postPost              -0.05     -0.22        -0.22         0.09     
                      (0.15)    (0.31)       (0.31)       (0.23)    
treatment:postPost     0.15      0.36         0.36         0.06     
                      (0.28)    (0.46)       (0.41)       (0.35)    
--------------------------------------------------------------------
r.squared              0.00      0.00         0.00         0.00     
adj.r.squared         -0.45     -0.43        -0.41        -0.43     
statistic              0.24      0.41         0.52         0.36     
p.value                0.79      0.66         0.59         0.70     
deviance            1761.03    491.51       578.39       779.69     
df.residual          891       250          311          431        
nobs                1292       359          440          620        
====================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-22-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-22-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>fml <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'dependent_variable ~ treatment + post + treatment:post'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formula</span>(.)</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a>did_model_fe <span class="ot">&lt;-</span> <span class="fu">plm</span>(<span class="at">data =</span> rtable,</span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>                    <span class="at">formula =</span> fml,</span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>                    <span class="at">index =</span> <span class="fu">c</span>(<span class="st">"firm_id"</span>,<span class="st">"anio_fiscal"</span>),</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a>                    <span class="at">model =</span> <span class="st">"within"</span>)</span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> did_model_fe,</span>
<span id="cb45-15"><a href="#cb45-15" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb45-16"><a href="#cb45-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-17"><a href="#cb45-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb45-18"><a href="#cb45-18" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb45-19"><a href="#cb45-19" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="diff-in-diff-design-assets-weighted-unsaturated-model-2" class="level2" data-number="3.7">
<h2 data-number="3.7" class="anchored" data-anchor-id="diff-in-diff-design-assets-weighted-unsaturated-model-2"><span class="header-section-number">3.7</span> Diff-in-diff design assets weighted (unsaturated model)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 \times Treatment_{i} + \beta_1 \times Post_{t} + \beta_2 \times Treatment_{i} \times Post_{t} + \epsilon_{it}\]</span> <span class="math display">\[\text{Note: The model is weighted by: Total assets 2014.}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(Y_{it}\)</span> is Log exits to tax haven (MID codes 1-7) ($), the dependent variable for unit <span class="math inline">\(i\)</span> at time <span class="math inline">\(t\)</span>.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Post_{t}\)</span> is a dummy variable that is 1 if time <span class="math inline">\(t\)</span> is after the implementation of the treatment, and 0 otherwise.</li>
<li><span class="math inline">\(Treatment_{i} \times Post_{t}\)</span> is the interaction between the treatment and the post period, which captures the treatment effect in the difference-in-differences.</li>
</ul>
<p><strong>Dependent variable:</strong> Log exits to tax haven (MID codes 1-7) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-23-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-23-1" role="tab" aria-controls="tabset-23-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-23-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-23-2" role="tab" aria-controls="tabset-23-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-23-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-23-3" role="tab" aria-controls="tabset-23-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-23-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-23-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-72-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-23-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-23-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
===========================================================================
                    All firms      Treatment A   Treatment B   Treatment C 
---------------------------------------------------------------------------
(Intercept)             10.82 ***     10.91 ***     10.91 ***     10.39 ***
                        (0.17)        (0.52)        (0.52)        (0.31)   
treatment                0.51          0.07          0.38          0.90    
                        (0.36)        (0.67)        (0.62)        (0.47)   
postPost                 0.08         -0.31         -0.31          0.37    
                        (0.16)        (0.41)        (0.41)        (0.27)   
treatment:postPost       0.08          0.68          0.50         -0.18    
                        (0.34)        (0.56)        (0.52)        (0.41)   
---------------------------------------------------------------------------
r.squared                0.01          0.01          0.02          0.03    
adj.r.squared            0.01          0.01          0.01          0.03    
sigma                    9.39          9.47          9.58          9.20    
statistic                4.96          1.77          2.76          6.35    
p.value                  0.00          0.15          0.04          0.00    
df                       3             3             3             3       
logLik               -2971.69       -831.42      -1022.54      -1417.86    
AIC                   5953.38       1672.83       2055.08       2845.72    
BIC                   5979.20       1692.25       2075.52       2867.86    
deviance            113614.95      31820.23      40054.32      52167.35    
df.residual           1288           355           436           616       
nobs                  1292           359           440           620       
===========================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-23-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-23-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>fml <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'dependent_variable ~ treatment + post + treatment:post'</span>)<span class="sc">%&gt;%</span> </span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formula</span>(.)</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>did_model_aw <span class="ot">&lt;-</span> <span class="fu">lm</span>(<span class="at">data =</span> rtable,</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>                   <span class="at">formula =</span> fml,</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>                   <span class="at">weights =</span> assets_2014)</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> did_model,</span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="diff-in-diff-design-assets-weighted-with-fixed-effects-2" class="level2" data-number="3.8">
<h2 data-number="3.8" class="anchored" data-anchor-id="diff-in-diff-design-assets-weighted-with-fixed-effects-2"><span class="header-section-number">3.8</span> Diff-in-diff design assets weighted (with fixed effects)</h2>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1 \times Treatment_{i} + \beta_2 \times Post_{t} + \beta_3 \times Treatment_{i} \times Post_{t} + \alpha_i + \gamma_t + \epsilon_{it}\]</span></p>
<p><span class="math display">\[\text{Note: The model is weighted by: Total assets 2014.}\]</span></p>
<p>Where:</p>
<ul>
<li><span class="math inline">\(Y_{it}\)</span> is Log exits to tax haven (MID codes 1-7) ($), the dependent variable for unit <span class="math inline">\(i\)</span> at time <span class="math inline">\(t\)</span>.</li>
<li><span class="math inline">\(Treatment_{i}\)</span> is a dummy variable that is 1 if unit <span class="math inline">\(i\)</span> receives the treatment at time <span class="math inline">\(t\)</span>, and 0 otherwise.</li>
<li><span class="math inline">\(Post_{t}\)</span> is a dummy variable that is 1 if time <span class="math inline">\(t\)</span> is after the implementation of the treatment, and 0 otherwise.</li>
<li><span class="math inline">\(Treatment_{i} \times Post_{t}\)</span> is the interaction between the treatment and the post period, which captures the treatment effect in the difference-in-differences.</li>
<li><span class="math inline">\(\alpha_i\)</span> is the fixed effect for unit <span class="math inline">\(i\)</span>, which captures time-invariant characteristics of each unit.</li>
<li><span class="math inline">\(\gamma_t\)</span> is the fixed effect for time <span class="math inline">\(t\)</span>, which captures any time shock that affects all units in the same way.</li>
<li><span class="math inline">\(\epsilon_{it}\)</span> is the error term.</li>
</ul>
<p><strong>Dependent variable:</strong> Log exits to tax haven (MID codes 1-7) ($)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-24-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-24-1" role="tab" aria-controls="tabset-24-1" aria-selected="true" href="">Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-24-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-24-2" role="tab" aria-controls="tabset-24-2" aria-selected="false" href="">Regression table</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-24-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-24-3" role="tab" aria-controls="tabset-24-3" aria-selected="false" href="">R Code</a></li></ul>
<div class="tab-content">
<div id="tabset-24-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-24-1-tab">
<div class="cell">
<div class="cell-output-display">
<p><img src="regression_transparency_files/figure-html/unnamed-chunk-75-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
<div id="tabset-24-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-24-2-tab">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>
====================================================================
                    All firms  Treatment A  Treatment B  Treatment C
--------------------------------------------------------------------
treatment:postPost      0.15      0.25         0.25        -0.00    
                       (0.28)    (0.48)       (0.43)       (0.36)   
--------------------------------------------------------------------
r.squared               0.76      0.77         0.78         0.78    
adj.r.squared           0.65      0.66         0.69         0.68    
sigma                   5.56      5.50         5.37         5.30    
logLik              -2025.04   -562.25      -680.37      -946.85    
AIC                  4864.08   1354.50      1630.74      2283.70    
BIC                  6965.81   1801.08      2182.45      3147.50    
nobs                 1292       359          440          620       
within.r.squared        0.00      0.00         0.00         0.00    
====================================================================
*** p &lt; 0.001; ** p &lt; 0.01; * p &lt; 0.05</code></pre>
</div>
</div>
</div>
<div id="tabset-24-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-24-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co"># With this code we construct our formula as a string to use in the model function.</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Check above to see the label of the dependent variable.</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>fml <span class="ot">&lt;-</span> glue<span class="sc">::</span><span class="fu">glue</span>(<span class="st">'dependent_variable ~ treatment + post + treatment:post'</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">formula</span>(.)</span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Model estimation:</span></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>did_model_fe_aw <span class="ot">&lt;-</span> <span class="fu">feols</span>(<span class="at">data =</span> rtable,</span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>                         <span class="at">fml =</span> fml_fe,</span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>                         <span class="at">weights =</span> <span class="sc">~</span>assets_2014,</span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>                         <span class="at">cluster =</span> <span class="sc">~</span>firm_id)</span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Wald test using clustered matrix of variance/covariance:</span></span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a>vcov_cl <span class="ot">&lt;-</span> <span class="fu">vcovCL</span>(<span class="at">x =</span> did_model_fe,</span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a>                  <span class="at">cluster =</span> rtable<span class="sc">$</span>firm_id)</span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Adjusted standard errors:</span></span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a>model_corrected <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(<span class="at">vcov. =</span> vcov_cl,</span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true" tabindex="-1"></a>                            <span class="at">x =</span> did_model_fe) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>